<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title >Academic Portfolio</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <div class="outer-wrapper-style">
        <header id="top-panel-container" class="top-panel-style"></header>
        <div class="middle-wrapper-style">
            <div class="sidebar-wrapper-style">
                <aside id="sidebar-panel-container" class="sidebar-panel-style"></aside> 
            </div>
            <!-- Semantic <main> used for SEO, but logic uses custom ID -->
            <div class="content-wrapper-style">
                <main id="content-panel-container" class="content-panel-style">
                    <p>Loading...</p>
                </main>
            </div>
        </div>
        <footer id="bottom-panel-container" class="bottom-panel-style"></footer>
    </div>

    <script>
        async function loadContent(url, containerId) {
            try {
                const container = document.getElementById(containerId);
                container.classList.remove('fade-in');

                const response = await fetch(url);
                if (!response.ok) throw new Error('Failed to load ' + url);
                const html = await response.text();

                container.innerHTML = html;

                if (containerId === 'content-panel-container') {
                    container.scrollTop = 0;
                }

                setTimeout(() => {
                    container.classList.add('fade-in');
                }, 10);

                if (containerId === 'sidebar-panel-container') {
                    highlightLink('certificates');
                }
            } catch (err) {
                console.error(err);
            }
        }

        // MOBILE LOGIC: Toggle the sidebar visibility
        function toggleMenu() {
            const sidebar = document.querySelector('.sidebar-wrapper-style');
            sidebar.classList.toggle('open');
        }

        function navigate(page) {
            loadContent(`body-pages/${page}.html`, 'content-panel-container');
            highlightLink(page); 
    
            // MOBILE LOGIC: Close menu and scroll to top after selection
            const sidebar = document.querySelector('.sidebar-wrapper-style');
            if (sidebar.classList.contains('open')) {
                sidebar.classList.remove('open');
            }
            window.scrollTo(0, 0); 
        }

        function highlightLink(pageName) {
            document.querySelectorAll('.sidebar-item-style').forEach(link => {
                link.classList.remove('active');
        
                // Match the exact navigate('pageName') pattern to avoid partial matches
                const exactMatchPattern = `navigate('${pageName}')`;
                const onclickAttr = link.getAttribute('onclick');
        
                if (onclickAttr && onclickAttr.includes(exactMatchPattern)) {
                    link.classList.add('active');
                }
            });
        }

        window.onload = () => {
            loadContent('header.html', 'top-panel-container');
            loadContent('sidebar-menu.html', 'sidebar-panel-container');
            loadContent('body-pages/certificates.html', 'content-panel-container');
            loadContent('footer.html', 'bottom-panel-container');
        };
    </script>
</body>
</html>