<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Academic Portfolio</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="outer-wrapper">
        <header id="top-panel" class="panel-style"></header>

        <div id="center-stage" class="stage-layout">
            <aside id="nav-rail" class="rail-style"></aside> 
            
            <!-- Semantic <main> used for SEO, but logic uses custom ID -->
            <main id="content-viewport" class="viewport-style">
                <p>Loading...</p>
            </main>
        </div>

        <footer id="bottom-dock" class="dock-style"></footer>
    </div>

    <script>
        async function loadContent(url, containerId) {
            try {
                const container = document.getElementById(containerId);
                container.classList.remove('fade-in');

                const response = await fetch(url);
                if (!response.ok) throw new Error('Failed to load ' + url);
                const html = await response.text();
        
                container.innerHTML = html;

                if (containerId === 'content-viewport') {
                    container.scrollTop = 0;
                }

                setTimeout(() => {
                    container.classList.add('fade-in');
                }, 10);

                if (containerId === 'nav-rail') {
                    highlightLink('certificates');
                }
            } catch (err) {
                console.error(err);
            }
        }

        function navigate(page) {
            loadContent(`body-pages/${page}.html`, 'content-viewport');
            highlightLink(page); 
            window.scrollTo(0, 0); 
        }

        function highlightLink(pageName) {
            document.querySelectorAll('.sidebar-item-style').forEach(link => {
                link.classList.remove('active');
                if (link.hasAttribute('onclick') && link.getAttribute('onclick').includes(pageName)) {
                    link.classList.add('active');
                }
            });
        }

        window.onload = () => {
            loadContent('sidebar-menu.html', 'nav-rail');
            loadContent('header.html', 'top-panel');
            loadContent('body-pages/certificates.html', 'content-viewport');
            loadContent('footer.html', 'bottom-dock');
        };
    </script>
</body>
</html>